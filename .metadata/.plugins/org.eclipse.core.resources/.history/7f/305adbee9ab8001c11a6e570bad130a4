/**
 * 
 */
package ftp.file.processor;

/**
 * @author home
 *
 */

import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.StringReader;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import org.w3c.dom.Document;
import org.xml.sax.InputSource;


public class FileProcessor {

	/**
	 * @param args
	 */
	public static void main(String[] args) {
		// TODO Auto-generated method stub
	      URL url = null;
	      URLConnection connection;
	      InputStreamReader fileListStream;
	      
		try {
			url = new URL("https://www.ncei.noaa.gov/data/normals-daily/access/");
		} catch (MalformedURLException e1) {
			// TODO Auto-generated catch block
			e1.printStackTrace();
		}
			
	    
	    BufferedReader buffer = null;
	    String line = "";
	    String csvSplitBy = ",";

	        try {
	        	connection = url.openConnection();
	        	fileListStream = new InputStreamReader(connection.getInputStream());
	        	
	            buffer = new BufferedReader(fileListStream);
	            while ((line = buffer.readLine()) != null) {
	                //String[] room = line.split(csvSplitBy);
	                System.out.println(line);
	                //System.out.println("room [capacity =" + room[0] + " , price=" + room[1]);
	                DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance(); 
	                DocumentBuilder builder;  
	                try {  
	                    builder = factory.newDocumentBuilder();  
	                    Document document = builder.parse(new InputSource(new StringReader(line)));  
	                    System.out.println(document);
	                } catch (Exception e) {  
	                    e.printStackTrace();  
	                } 
	                
	            }

	        } catch (FileNotFoundException e) {
	            e.printStackTrace();
	        } catch (IOException e) {
	            e.printStackTrace();
	        } finally {
	            if (buffer != null) {
	                try {
	                    buffer.close();
	                } catch (IOException e) {
	                    e.printStackTrace();
	                }
	            }
	        }	        
	        
	        
	}

}
